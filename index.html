<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ArcGIS OAuth Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://js.arcgis.com/4.29/"></script>
  </head>
  <body>
    <h1>ArcGIS Login</h1>
    <button id="loginBtn">Login</button>

    <script>
      require([
        "esri/identity/OAuthInfo",
        "esri/identity/IdentityManager"
      ], function(OAuthInfo, esriId) {
        const info = new OAuthInfo({
          appId: "kJb5xoqjKAHsY2ag",
          popup: false,
          flowType: "auto",
          redirectUri: "https://urbanizedev.github.io/arcgis_github_oauth/login-complete.html"
        });
        esriId.registerOAuthInfos([info]);

        document.getElementById("loginBtn").addEventListener("click", function () {
          esriId.getCredential("https://www.arcgis.com/sharing");
        });
      });
    </script>
  </body>
</html>